

# âœ… ä¿®æ­£åçš„çœŸå®æ•°æ®æµé¡ºåºï¼ˆä½ è¯´çš„å¯¹ï¼‰

## Step 1ï¼šBVH äº§ç”Ÿå€™é€‰æ¥è§¦å­é›†ï¼ˆå…ˆåšï¼‰

è¾“å‡ºçš„ä¸åªæ˜¯ tri-pairï¼Œè€Œæ˜¯ç»™æˆ‘ä»¬ä¸€ä¸ªâ€œæ¥è§¦ç›¸å…³å­é›†â€ï¼š

- å€™é€‰å¯¹é›†åˆï¼š  
  $$\mathcal{C}=\{(t^A_i,t^B_j)\}$$
    
- ä»å€™é€‰å¯¹æŠ•å½±å‡ºä¸¤ä¾§çš„å€™é€‰ä¸‰è§’å½¢é›†åˆï¼š  
  $$T_A=\{t^A_i \mid \exists j,\ (t^A_i,t^B_j)\in\mathcal{C}\}$$  
  $$T_B=\{t^B_j \mid \exists i,\ (t^A_i,t^B_j)\in\mathcal{C}\}$$
    

> è¿™ä¸€æ­¥çš„æ„ä¹‰ï¼š  
> **æŠŠæ•´å¼  A çš„è¡¨é¢â€œè£å‰ªâ€æˆâ€œå¯èƒ½æ¥è§¦çš„å±€éƒ¨å­ç½‘æ ¼â€**ã€‚  
> ä½ è¯´çš„â€œä¿è¯ä¸æ˜¯æ‰€æœ‰éƒ½ç›¸é‚»â€ï¼ŒæŒ‡çš„å°±æ˜¯è¿™é‡Œï¼š**åœ¨å­é›†é‡Œä¸ä¸€å®šå…¨è¿é€š**ã€‚

---

## Step 2ï¼šåœ¨å­ç½‘æ ¼ä¸Šåšâ€œè¿é€šåˆ†é‡/èšç±»â€ï¼ˆå†åšï¼‰

ç°åœ¨æˆ‘ä»¬åšçš„ä¸æ˜¯ â€œA å…¨å±€è¿é€šåˆ†é‡â€ï¼Œè€Œæ˜¯ï¼š

> **A çš„æ¥è§¦å€™é€‰å­é›† $T_A$ åœ¨ A çš„é‚»æ¥å›¾ä¸Šä¼šåˆ†æˆå¤šä¸ªè¿é€šåˆ†é‡**  
> ï¼ˆæ¯ä¸ªè¿é€šåˆ†é‡å¾ˆå¯èƒ½å¯¹åº”ä¸€ä¸ªâ€œè„šåº•åŒºåŸŸâ€ï¼‰

å½¢å¼åŒ–ä¸€ç‚¹ï¼š

- å»º A çš„ä¸‰è§’é‚»æ¥å›¾ï¼ˆå…±äº«è¾¹æˆ–å…±äº«ç‚¹éƒ½è¡Œï¼‰ï¼š$G_A=(V_A,E_A)$
    
- åªå–å­å›¾ï¼š$G_A[T_A]$
    
- æ±‚è¿é€šåˆ†é‡ï¼š  
  $$\{C^A_1, C^A_2, \dots\} = \mathrm{CC}(G_A[T_A])$$
    

åŒç† B ä¾§ä¹Ÿå¯ä»¥åšï¼š$\mathrm{CC}(G_B[T_B])$

> è¿™ä¸€æ­¥ä½ è¯´å¾—éå¸¸å‡†ç¡®ï¼š  
> **â€œè¿é€šåˆ†é‡æ˜¯ä» BVH ç»™å‡ºçš„å±€éƒ¨å€™é€‰é‡Œé•¿å‡ºæ¥çš„â€ï¼Œä¸æ˜¯ä»å…¨ä½“ A é‡Œç›´æ¥æ±‚ã€‚**

---

## Step 3ï¼šä»â€œè¿é€šåˆ†é‡â€ç»„ç»‡ PatchPairï¼ˆP çš„æ­£ç¡®æ¥æºï¼‰

ç°åœ¨æˆ‘ä»¬ç»ˆäºèƒ½å®šä¹‰ patchpair çš„â€œåŸå­å•ä½â€ï¼š

å¯¹æ¯ä¸ª A-ä¾§å€™é€‰è¿é€šåˆ†é‡ $C^A_k$ï¼š

- æ”¶é›†æ‰€æœ‰ä¸å…¶ç›¸å…³çš„å€™é€‰å¯¹ï¼š  
  $$\mathcal{C}_k = \{(t^A_i,t^B_j)\in \mathcal{C}\mid t^A_i\in C^A_k\}$$
    
- åœ¨ $\mathcal{C}_k$ å†…ï¼Œå†æŒ‰æ³•çº¿/gap/support åšç»†åˆ†ä¸é—¨æ§ï¼Œå½¢æˆä¸€ä¸ªæˆ–å¤šä¸ª $P$ã€‚
    

è¿™å°±è§£å†³äº†ä½ ä¸¾çš„ä¾‹å­ï¼š

- ä¸€ä¸ªè„šåº•ï¼ˆA ä¸Šå±€éƒ¨ï¼‰è·¨è¶Š B çš„å¯¹è§’çº¿ä¸¤ä¸‰è§’å½¢  
  â†’ ä»ç„¶åœ¨åŒä¸€ä¸ª $C^A_k$ é‡Œ  
  â†’ ä»ç„¶æ˜¯åŒä¸€ç»„ patch/region çš„å€™é€‰æ¥æº  
  â†’ **ä¸ä¼šè¢«â€œB çš„ä¸‰è§’å½¢åˆ†å‰²â€è¯¯åˆ‡ç¢**
    

---

# ä½ åˆšæ‰é‚£å¥â€œBVH ä¸æ˜¯ A å†…éƒ¨äº§ç”Ÿé—®é¢˜â€æ€ä¹ˆç†è§£ï¼Ÿ

å®Œå…¨æ­£ç¡®ã€‚æˆ‘ä»¬å¹¶ä¸æ˜¯è¯´ BVH åœ¨ A å†…éƒ¨äº§ç”Ÿè¾¹ï¼Œè€Œæ˜¯ï¼š

- BVH ç»™äº†æˆ‘ä»¬â€œå“ªäº› A ä¸‰è§’å½¢å€¼å¾—çœ‹â€ï¼ˆå­é›† $T_A$ï¼‰
    
- ç„¶åæˆ‘ä»¬åœ¨ A è‡ªå·±å·²æœ‰çš„æ‹“æ‰‘ï¼ˆç‚¹ç´¢å¼•/ä¸‰è§’ç´¢å¼•ï¼‰ä¸Š
    
- å¯¹è¿™ä¸ªå­é›†åšè¿é€šåˆ†æ
    

æ‰€ä»¥ BVH æ˜¯**ç­›é€‰å™¨**ï¼Œè¿é€šæ€§æ¥è‡ª**åŸå§‹ç½‘æ ¼æ‹“æ‰‘**ã€‚

---

# âœ… ç°åœ¨æŠŠä½ æå‡ºçš„é¡ºåºå†™æˆä¸€å¥â€œå®šç¨¿ç‰ˆâ€

> å…ˆé€šè¿‡ BVH è·å¾—æ½œåœ¨æ¥è§¦ä¸‰è§’å½¢å¯¹ï¼Œå¹¶ç”±æ­¤æŠ½å–ä¸¤ä¾§çš„æ¥è§¦å€™é€‰å­ç½‘æ ¼ï¼›å†åœ¨è¯¥å­ç½‘æ ¼ä¸ŠåŸºäºç½‘æ ¼æ‹“æ‰‘è®¡ç®—è¿é€šåˆ†é‡ï¼Œä»è€Œå°†æ¥è§¦åŒºåŸŸè‡ªç„¶åˆ†è§£ä¸ºå¤šä¸ªå±€éƒ¨ç»„ä»¶ï¼ˆä¾‹å¦‚å¤šè„šæ¥è§¦ç‚¹ï¼‰ï¼›éšååœ¨æ¯ä¸ªå±€éƒ¨ç»„ä»¶å†…æ„å»ºå¹¶é—¨æ§ patch pairsï¼Œå¹¶æœ€ç»ˆèšåˆä¸º regionã€‚

---

## åªé—®ä½ ä¸€ä¸ªå°ç¡®è®¤ï¼ˆä¸ºäº†é¿å…æˆ‘ä»¬åœ¨â€œé‚»æ¥å®šä¹‰â€ä¸ŠåˆåŸ‹é›·ï¼‰

ä½ åœ¨ A çš„å­å›¾è¿é€šé‡Œï¼Œé‚»æ¥å‡†å¤‡ç”¨å“ªç§ï¼Ÿ

- **å…±äº«è¾¹**ï¼ˆæ›´ä¸¥æ ¼ï¼Œé¿å…â€œç‚¹æ¥è§¦â€è¯¯è¿ï¼‰
    
- **å…±äº«ç‚¹**ï¼ˆæ›´å®½æ¾ï¼‰
    

ä½ å›å¤â€œè¾¹â€æˆ–â€œç‚¹â€å°±è¡Œã€‚

---

# 1ï¸âƒ£ Patch / Region / Merge å®Œæ•´å±‚çº§å®šç¨¿ï¼ˆå¹²å‡€ã€å¯¹ç§°ã€å¯å®ç°ï¼‰

## 0) è¾“å…¥ä¸åŸºæœ¬å¯¹è±¡

### 0.1 BVH å€™é€‰å¯¹
$$\mathcal{C}=\{(t_i^A,t_j^B)\}$$
æ¯æ¡å€™é€‰è¾¹éƒ½æœ‰å‡ ä½•å±æ€§ï¼š
- æ— å‘æ³•çº¿ä¸€è‡´æ€§ï¼š$\alpha_{ij}=|n(t_i^A)\cdot n(t_j^B)|$
- gap ç»Ÿè®¡ï¼š$g_{ij}$ï¼ˆä¾‹å¦‚ min/mean/percentileï¼‰

---

## 1) Level-1ï¼šæ¥è§¦å›¾ä¸æ¥è§¦è¿é€šåˆ†é‡ $C_k$ï¼ˆ**æœ€åº•å±‚ã€æœ€é‡è¦**ï¼‰

### 1.1 å®šä¹‰äºŒéƒ¨æ¥è§¦å›¾
$$G=(V_A\cup V_B,\ E)$$
- $V_A=\{t_i^A\mid \exists j,(t_i^A,t_j^B)\in\mathcal{C}\}$
- $V_B=\{t_j^B\mid \exists i,(t_i^A,t_j^B)\in\mathcal{C}\}$
- $E=\mathcal{C}$

> ç›´è§‰ï¼šBVH ç»™ä½ çš„ tri-pairï¼Œå°±æ˜¯è¿™å¼ å›¾çš„è¾¹ã€‚

### 1.2 æ¥è§¦è¿é€šåˆ†é‡
$$\{C_1,C_2,\dots\}=\mathrm{CC}(G)$$
æ´¾ç”Ÿä¸¤ä¾§è§†å›¾ï¼š
$$C_k^A=\{t^A\in V_A\mid \exists t^B,(t^A,t^B)\in C_k\}$$
$$C_k^B=\{t^B\in V_B\mid \exists t^A,(t^A,t^B)\in C_k\}$$

---

## 2) Level-2ï¼šPatchPair $P$ï¼ˆ$C_k$ å†…â€œå±€éƒ¨ä¸€è‡´æ€§åˆ†å‰²â€ï¼‰

### 2.1 é™å®šåœ¨ $C_k$ å†…ç»†åˆ†
å­å›¾ï¼š$G_k=(C_k^A\cup C_k^B,\ E_k)$

### 2.2 è¾¹é—¨æ§ï¼ˆå±€éƒ¨å‡ ä½•ä¸€è‡´æ€§ï¼‰
$$\mathrm{KeepEdge}(t_i^A,t_j^B)= \big(\alpha_{ij}\ge \theta_n\big)\ \land\ \big(g_{ij}\le \theta_g\big)$$
ä¿ç•™è¾¹ï¼š$E_k'=\{(t_i^A,t_j^B)\in E_k\mid \mathrm{KeepEdge}=1\}$  
å¾—å¹²å‡€å­å›¾ï¼š$G_k'=(C_k^A\cup C_k^B,\ E_k')$

### 2.3 PatchPair = $G_k'$ çš„è¿é€šåˆ†é‡
$$\{P_{k,1},P_{k,2},\dots\}=\mathrm{CC}(G_k')$$
æ´¾ç”Ÿï¼š$P^A,\ P^B$

> ç›´è§‰ï¼š  
> ä½ æ‹…å¿ƒçš„â€œB å¯¹è§’çº¿åˆ‡ç¢è„šåº•â€ä¸ä¼šå‘ç”Ÿï¼š  
> åªè¦ $B_1$ ä¸ $B_2$ é€šè¿‡åŒä¸€æ‰¹ A ä¸‰è§’å½¢è¿é€šï¼Œå®ƒä»¬ä»å±åŒä¸€ $P$ã€‚

---

## 3) Level-2.5ï¼šæ”¯æŒåº¦ SR ä¸è¿‡æ»¤

å¯¹æ¯ä¸ª $P$ å®šä¹‰è¦†ç›–åº¦å‹ SRï¼š
$$\mathrm{SR}(P)=\frac{\mathrm{Area}(R_A(P)\cap R_B(P))}{\min(\mathrm{Area}(R_A(P)),\mathrm{Area}(R_B(P)))}$$
ï¼ˆ$R_A(P)$ ä¸º $P^A$ ä¸‰è§’å½¢é¢ç§¯å¹¶é›†è¿‘ä¼¼ï¼‰

è¿‡æ»¤ï¼š$P$ æœ‰æ•ˆ $\iff$ $\mathrm{SR}(P)\ge \theta_{SR}$  
è¾“å‡ºæœ‰æ•ˆé›†åˆ $\mathcal{P}$

---

## 4) Level-3ï¼šRegionï¼ˆPatchPair èšåˆï¼‰

### 4.1 Region ç›¸é‚»æ€§ï¼ˆåŒä¾§ AND + è¾¹å…±äº«ï¼‰
$$\mathrm{Conn}_S(P_i,P_j)=1 \iff (P_i^S\cup P_j^S)\text{ åœ¨ mesh }S\text{ çš„è¾¹å…±äº«é‚»æ¥å›¾ä¸Šè¿é€š}$$
$$\mathrm{Adj}(P_i,P_j)=\mathrm{Conn}_A(P_i,P_j)\ \land\ \mathrm{Conn}_B(P_i,P_j)$$

### 4.2 åˆå¹¶åˆ¤æ®
$$\mathrm{CanMerge}(P_i,P_j)= \mathrm{Adj}(P_i,P_j)\ \land\ (|n_i\cdot n_j|\ge \theta_{merge})\ \land\ (\text{gap compatible})\ \land\ (\mathrm{SR}_{agg}\text{ not decrease})$$

Region ç”Ÿæˆï¼šBFS/Union-Find åˆå¹¶ â†’ è¾“å‡º $\{\mathcal{R}_1,\mathcal{R}_2,\dots\}$  
æ¯ä¸ª Region æœ‰åŒä¾§æŠ•å½±ï¼š$\mathcal{R}^A,\ \mathcal{R}^B$

---

## 5) èŒè´£è¾¹ç•Œï¼ˆé˜²æ··ä¹±ï¼‰

- **BVH / $\mathcal{C}$**ï¼šä»…å€™é€‰ç­›é€‰
- **$C_k$**ï¼šè§£å†³â€œé”é“¾å¼ AB è¿æ¥â€ï¼Œå®šä¹‰æ¥è§¦å­ä¸–ç•Œ
- **PatchPair $P$**ï¼š$C_k$ å†…å±€éƒ¨ä¸€è‡´æ€§åˆ†å‰²ï¼ˆnormal/gapï¼‰
- **SR**ï¼šè¿‡æ»¤â€œè¿‘ä½†éæ¥è§¦â€å‡é˜³æ€§
- **Region**ï¼šPatch çº§æ‹“æ‰‘èšåˆï¼ˆåŒä¾§è¿é€š + åˆå¹¶åˆ¤æ®ï¼‰

---

## ğŸ”‘ å…³é”®ç¡®è®¤ï¼ˆä»…æ­¤ä¸€é—®ï¼‰

åœ¨ä½ ç°æœ‰ç³»ç»Ÿé‡Œï¼Œ**KeepEdge çš„é—¨æ§ï¼ˆnormal/gapï¼‰** ä½ å¸Œæœ›å®ƒå‘ç”Ÿåœ¨ï¼š

- **A)** BVH ä¹‹åç«‹åˆ»ï¼ˆè¾¹çº§è¿‡æ»¤æ—©ä¸€ç‚¹ï¼‰  
- **B)** å…ˆä¿ç•™è¾¹ï¼Œç­‰åˆ° Patch çº§å†ç®—ï¼ˆæ™šä¸€ç‚¹ï¼‰  

ä½ å›å¤ **A** æˆ– **B** å³å¯ã€‚